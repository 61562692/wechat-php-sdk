<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="baidu_union_verify" content="d1952c66cf48912e21c18c7c581f382a"><meta name="360-site-verification" content="67fbcc5a67f4c65c057315b28fa0b2c8"><meta name="google-site-verification" content="2GzxQ0VtXwTSUdmGm6DzcmhTzM_I9QmzCb_pzpMzD88"><title>wiki更新日志 | wechat-php-sdk Blog</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3,minimum-scale=1"><meta name="author" content="binsee"><meta name="description" content="微信平台 wechat-php-sdk 微信开发"><link rel="alternate" href="atom.xml" title="wechat-php-sdk Blog" type="application/atom+xml"><link rel="icon" href="/wechat-php-sdk/img/favicon.ico"><link rel="apple-touch-icon" href="/wechat-php-sdk/img/pacman.jpg"><link rel="apple-touch-icon-precomposed" href="/wechat-php-sdk/img/pacman.jpg"><link rel="stylesheet" href="/wechat-php-sdk/css/style.css" type="text/css"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?aecd5057338b5b9ca0eac9a9d9fadbe7";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)}();</script></head><body><header><div><div id="textlogo"><h1 class="site-name"><a href="/wechat-php-sdk/" title="wechat-php-sdk Blog">wechat-php-sdk Blog</a></h1><h2 class="blog-motto">微信平台wechat-php-sdk开源项目，开发文档blog</h2></div><div class="navbar"><a class="navbutton navmobile" href="#" title="菜单"></a></div><nav class="animated"><ul><ul><li><a href="/wechat-php-sdk/">首页</a></li><li><a href="/wechat-php-sdk/archives">归档</a></li><li><a href="/wechat-php-sdk/update">更新日志</a></li><li><a href="/wechat-php-sdk/readme">项目文档</a></li><li><a href="/wechat-php-sdk/about">关于项目</a></li><li><form class="search" action="//google.com/search" method="get" accept-charset="utf-8"><label>Search</label><input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索"> <input type="hidden" name="q" value="site:binsee.github.io/wechat-php-sdk"></form></li></ul></ul></nav></div></header><div id="container"><div id="main" class="page" itemscope itemprop="blogPost"><article itemprop="articleBody"><header class="article-info clearfix"><h1 itemprop="name"><a href="/wechat-php-sdk/update/index.html" title="wiki更新日志" itemprop="url">wiki更新日志</a></h1><p class="article-author">By <a href="https://binsee.github.io/wechat-php-sdk" title="binsee">binsee</a></p><p class="article-time"><time datetime="2014-12-04T16:32:34.000Z" itemprop="datePublished">2014年12月05日</time> 更新日期:<time datetime="2015-01-08T17:31:20.000Z" itemprop="dateModified">2015年01月09日</time></p></header><div class="article-content"><div id="toc" class="toc-article"><h2 class="toc-title"><span>文章目录</span></h2><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#2015/01/09_01:31:25"><span class="toc-number">1.</span> <span class="toc-text">2015/01/09 01:31:25</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014-12-28_22:10:47"><span class="toc-number">2.</span> <span class="toc-text">2014-12-28 22:10:47</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014-12-27_22:29:17"><span class="toc-number">3.</span> <span class="toc-text">2014-12-27 22:29:17</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014-12-26_14:08:46"><span class="toc-number">4.</span> <span class="toc-text">2014-12-26 14:08:46</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014-12-26_11:54:38"><span class="toc-number">5.</span> <span class="toc-text">2014-12-26 11:54:38</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014-12-11_15:54:00"><span class="toc-number">6.</span> <span class="toc-text">2014-12-11 15:54:00</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/12/05_00:30:27"><span class="toc-number">7.</span> <span class="toc-text">2014/12/05 00:30:27</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014-12-03_18:23:20"><span class="toc-number">8.</span> <span class="toc-text">2014-12-03 18:23:20</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014-11-27_15:56:24"><span class="toc-number">9.</span> <span class="toc-text">2014-11-27 15:56:24</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/11/12_20:41:07"><span class="toc-number">10.</span> <span class="toc-text">2014/11/12 20:41:07</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/10/30_17:57:27"><span class="toc-number">11.</span> <span class="toc-text">2014/10/30 17:57:27</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/10/22_22:21:11"><span class="toc-number">12.</span> <span class="toc-text">2014/10/22 22:21:11</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/10/16_22:37:30"><span class="toc-number">13.</span> <span class="toc-text">2014/10/16 22:37:30</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/10/15_18:32:15"><span class="toc-number">14.</span> <span class="toc-text">2014/10/15 18:32:15</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/10/15_18:06:49"><span class="toc-number">15.</span> <span class="toc-text">2014/10/15 18:06:49</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/10/14_23:32:29"><span class="toc-number">16.</span> <span class="toc-text">2014/10/14 23:32:29</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/10/10_01:31:10"><span class="toc-number">17.</span> <span class="toc-text">2014/10/10 01:31:10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/09/30_21:22:06"><span class="toc-number">18.</span> <span class="toc-text">2014/09/30 21:22:06</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/09/28_20:02:16"><span class="toc-number">19.</span> <span class="toc-text">2014/09/28 20:02:16</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/09/25_22:23:25"><span class="toc-number">20.</span> <span class="toc-text">2014/09/25 22:23:25</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/09/24_23:19:18"><span class="toc-number">21.</span> <span class="toc-text">2014/09/24 23:19:18</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/09/23_22:23:45"><span class="toc-number">22.</span> <span class="toc-text">2014/09/23 22:23:45</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/09/22_19:38:57"><span class="toc-number">23.</span> <span class="toc-text">2014/09/22 19:38:57</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2014/09/22_18:38:52"><span class="toc-number">24.</span> <span class="toc-text">2014/09/22 18:38:52</span></a></li></ol></div><p>微信公众平台php开发包,细化各项接口操作,支持链式调用<br>项目创建人：<strong><a href="https://github.com/dodgepudding" target="_blank" rel="external">dodgepudding</a></strong><br>项目地址：<strong><a href="https://github.com/dodgepudding/wechat-php-sdk" target="_blank" rel="external">https://github.com/dodgepudding/wechat-php-sdk</a></strong></p><p>PS:如本日志所列最新更新在项目地址未看到，可能是项目创建人暂未处理pull合并代码，请移步<strong><a href="https://github.com/binsee/wechat-php-sdk" target="_blank" rel="external">https://github.com/binsee/wechat-php-sdk</a></strong>查看</p><p><strong>以下为本项目更新情况：</strong></p><hr><h3 id="2015/01/09_01:31:25">2015/01/09 01:31:25</h3><blockquote><p>公众号类 增加JSAPI授权相关方法：<br>1、getJsTicket($appid=’’,$jsapi_ticket=’’) 获取JSAPI授权TICKET<br>2、getJsSign($url, $timeStamp, $nonceStr, $appid=’’) 获取JsApi使用签名<br>3、resetJsTicket($appid=’’) 删除JSAPI授权TICKET</p></blockquote><p>此接口官方目前白名单域名测试，暂未正式开放</p><hr><h3 id="2014-12-28_22:10:47">2014-12-28 22:10:47</h3><blockquote><p>公众号类 修复 查询高级群发发送状态方法返回值的问题(感谢QQ群内@Jianglb)</p></blockquote><hr><h3 id="2014-12-27_22:29:17">2014-12-27 22:29:17</h3><blockquote><p>公众号类：<br>1、增加 事件类型 常量的定义<br>2、增加 卡券 相关的系列接口及事件推送(主要参考 @CheerChen的github项目更新、官方卡券开发文档)<br>3、修正、增加少量的注释<br>4、被动接口 music() 方法，增加$thumbmediaid参数<br>5、增加 获取企业微信服务器IP地址列表 方法 getServerIp()</p><p>企业号类：<br>1、增加 事件类型 常量的定义<br>2、修正 getRevEvent() 方法 由于空EventKey值可能出现的小问题</p><p>错误码类：<br>1、增加 2个 错误信息记录</p><p>demo.php文件：<br>1、修正对valid()方法的注释</p><p>README.md文档：<br>1、增加 公众号类-被动接口方法 的说明<br>2、增加 公众号类-预定义常量列表 的说明<br>3、增加 企业号类-预定义常量列表 的说明<br>4、修改 公众号类</p></blockquote><hr><h3 id="2014-12-26_14:08:46">2014-12-26 14:08:46</h3><blockquote><p>企业号类 增加 获取部门成员详情 getUserListInfo($department_id,$fetch_child=0,$status=0)</p></blockquote><hr><h3 id="2014-12-26_11:54:38">2014-12-26 11:54:38</h3><blockquote><p>公众号类库:<br>1、公众号类库 增加多客服事件信息获取方法<br>getRevKFCreate() 获取多客服会话状态推送事件 - 接入会话<br>getRevKFClose() 获取多客服会话状态推送事件 - 关闭会话<br>getRevKFSwitch() 获取多客服会话状态推送事件 - 转接会话</p><p>2、公众号类库 增加多客服会话管理方法<br>getCustomServiceOnlineKFlist() 获取多客服在线客服接待信息<br>createKFSession($openid,$kf_account,$text=’’) 创建指定多客服会话<br>closeKFSession($openid,$kf_account,$text=’’) 关闭指定多客服会话<br>getKFSession($openid) 获取用户会话状态<br>getKFSessionlist($kf_account) 获取指定客服的会话列表<br>getKFSessionWait() 获取未接入会话列表</p><p>备注：这些方法是根据多客服官方给出的开发文档写出，但部分接口功能由于官方后台未完善，可能暂时不能使用。<br>但可以根据这些代码提前准备自己的工作流程，等待官方正式更新接口后再上线</p></blockquote><hr><h3 id="2014-12-11_15:54:00">2014-12-11 15:54:00</h3><blockquote><p>公众号类 添加 模板消息新接口：<br>1、设置所属行业<br>2、添加消息模板<br>公众号类 修正 添加消息模板 方法的注释<br>企业号类 增加 批量删除成员方法 deleteUsers($userids)</p></blockquote><hr><h3 id="2014/12/05_00:30:27">2014/12/05 00:30:27</h3><blockquote><p>公众号类库：<br>1、修正 高级群发-预览消息接口URL<br>2、优化、整理部分API的常量定义，使之更清晰化。参考常量API_BASE_URL_PREFIX<br>3、修正 高级群发接口的mpvideo类型参数<br>4、增加 添加、修改、删除客服账号、上传客服头像接口<br>说明文档：<br>1、整理公众号类库主动API部分权限的说明</p></blockquote><hr><h3 id="2014-12-03_18:23:20">2014-12-03 18:23:20</h3><blockquote><p>公众号类库：<br>1、调整订阅号可使用功能说明（官方调整了订阅号的权限策略）<br>2、更新高级群发接口，添加了预览和查询结果方法<br>3、预览群发消息效果接口的url暂未更新，等待官方更新文档说明</p></blockquote><hr><h3 id="2014-11-27_15:56:24">2014-11-27 15:56:24</h3><blockquote><p>修复json_encode方法：<br>当传入数组内值为数字字符串，会被作为数字处理，在某些时候可能会引起错误。</p></blockquote><hr><h3 id="2014/11/12_20:41:07">2014/11/12 20:41:07</h3><blockquote><p>1、公众号类库 增加 获取微信服务器IP列表 接口</p></blockquote><hr><h3 id="2014/10/30_17:57:27">2014/10/30 17:57:27</h3><blockquote><p>1、升级SSL支持 @fanchou <strong><a href="https://github.com/dodgepudding/wechat-php-sdk/pull/149" target="_blank" rel="external">来自pull#149</a> <a href="https://github.com/dodgepudding/wechat-php-sdk/pull/145" target="_blank" rel="external">pull#145</a></strong><br>2、微信官方开放<strong>语义理解</strong>接口，要求权限：微信认证(服务号)</p></blockquote><hr><h3 id="2014/10/22_22:21:11">2014/10/22 22:21:11</h3><blockquote><p>1、企业号类 更新根据code获取成员信息方法getUserId<br>可获取到的信息增加了手机设备号(由微信在安装时随机生成)<br>现在返回数组如下：</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">array</span>(</div><div class="line">	<span class="string">'UserId'</span> =&gt; <span class="string">'USERID'</span>,       <span class="comment">//员工UserID</span></div><div class="line">	<span class="string">'DeviceId'</span> =&gt; <span class="string">'DEVICEID'</span>    <span class="comment">//手机设备号(由微信在安装时随机生成)</span></div><div class="line">)</div></pre></td></tr></table></figure><hr><h3 id="2014/10/16_22:37:30">2014/10/16 22:37:30</h3><blockquote><p>1、修复加密模式下没有appid的订阅号无法被动回复的问题。<strong><a href="https://github.com/dodgepudding/wechat-php-sdk/pull/140" target="_blank" rel="external">来自pull#140</a></strong><br>2、使用isset判断$echoStr是否定义。<strong><a href="https://github.com/dodgepudding/wechat-php-sdk/pull/139" target="_blank" rel="external">来自pull#139</a></strong><br>3、在<strong><a href="https://github.com/dodgepudding/wechat-php-sdk/pull/140" target="_blank" rel="external">pull#140</a></strong>基础上进行修改，公众号类库 修改关于解密时订阅号appid问题的解决代码，避免服务号appid错误而无法检测到，且覆盖掉服务号appid的情况。见<strong><a href="https://github.com/dodgepudding/wechat-php-sdk/pull/141" target="_blank" rel="external">pull#141</a></strong><br>4、公众号类库、企业号类库 注释掉加密库的异常输出代码</p></blockquote><hr><h3 id="2014/10/15_18:32:15">2014/10/15 18:32:15</h3><blockquote><p>1、修复 更正设置备注名接口 pull request from fanchou/master</p></blockquote><hr><h3 id="2014/10/15_18:06:49">2014/10/15 18:06:49</h3><blockquote><p>1、企业号类库 增加 获取标签列表方法 getTagList()</p></blockquote><hr><h3 id="2014/10/14_23:32:29">2014/10/14 23:32:29</h3><blockquote><p>1、企业号类库 增加对 自定义菜单推事件 的支持</p><p>2014/10/14 16:40:52<br>1、公众号类库 增加对消息体签名加密方案 的支持</p></blockquote><hr><h3 id="2014/10/10_01:31:10">2014/10/10 01:31:10</h3><blockquote><p>1、添加 语义理解接口 （暂时官方未开放使用权限）<br>2、修复 媒体下载接口getMedia() 返回内容错误问题</p></blockquote><hr><h3 id="2014/09/30_21:22:06">2014/09/30 21:22:06</h3><blockquote><p>1、企业类库 补充 根据code获取成员id 方法 getUserId($code,$agentid=0)<br>最初创建企业类库时，把这个接口给遗漏了。感谢Talent.Miao提醒<br>2、更新一下 错误码类 的使用注释，因为有人可能不清楚调用类库接口失败后<br>只返回false，不知道从哪获得错误码的</p></blockquote><hr><h3 id="2014/09/28_20:02:16">2014/09/28 20:02:16</h3><blockquote><p>1、企业类库 增加 移动部门方法 moveDepartment($data)</p></blockquote><hr><h3 id="2014/09/25_22:23:25">2014/09/25 22:23:25</h3><blockquote><p>1、企业类库 创建部门、更新部门 方法的数组参数增加新键值注释。<br>2、企业类库 错误码43009 内容修改</p></blockquote><hr><h3 id="2014/09/24_23:19:18">2014/09/24 23:19:18</h3><blockquote><p>根据 @pkkgu 提出的需要，为checkAuth()增加一个$token参数，用于在特殊情况<br>下手动指定access_token值，以避免每次重复获取access_token到达API请求限值。</p></blockquote><hr><h3 id="2014/09/23_22:23:45">2014/09/23 22:23:45</h3><blockquote><p>修改企业号开发类库中的：<br>二次验证接口 authSucc($userid)</p></blockquote><hr><h3 id="2014/09/22_19:38:57">2014/09/22 19:38:57</h3><blockquote><p>修改项目说明一文</p></blockquote><hr><h3 id="2014/09/22_18:38:52">2014/09/22 18:38:52</h3><blockquote><p>重新调整框架，修复上部菜单问题</p></blockquote></div><footer class="article-footer clearfix"><div class="article-share" id="share"><div data-url="https://binsee.github.io/wechat-php-sdk/update/index.html" data-title="wiki更新日志 | wechat-php-sdk Blog" data-tsina="null" class="share clearfix"></div></div></footer></article><section class="comment"><div class="ds-thread" data-thread-key="/wechat-php-sdk/update/index.html" data-title="wiki更新日志" data-url="https://binsee.github.io/wechat-php-sdk/update/index.html" id="ds_thread"><noscript>Please enable JavaScript to view the <a href="//duoshuo.com/?ref_noscript">comments powered by duoshuo.</a></noscript></div></section></div></div><footer><div id="footer"><p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> & <a href="http://gengbiao.me" target="_blank" title="coney">coney</a> © 2015 <a href="https://binsee.github.io/wechat-php-sdk" target="_blank" title="binsee">binsee</a></p></div></footer><script src="/wechat-php-sdk/js/jquery-2.1.0.min.js"></script><script type="text/javascript">$(document).ready(function(){function e(){"number"==typeof window.innerWidth?n=window.innerWidth:document.documentElement&&document.documentElement.clientWidth&&(n=document.documentElement.clientWidth)}$(".navbar").click(function(){$("header nav").toggleClass("shownav")});var n=0,s=$("#main"),a=$("#asidepart"),o=$(".closeaside"),d=$(".openaside");$(window).resize(function(){e(),n>=1024?$("header nav").removeClass("shownav"):(s.removeClass("moveMain"),a.css("display","block").removeClass("fadeOut"),d.css("display","none"))}),o.click(function(){a.addClass("fadeOut").css("display","none"),d.css("display","block").addClass("fadeIn"),s.addClass("moveMain")}),d.click(function(){d.css("display","none").removeClass("beforeFadeIn"),a.css("display","block").removeClass("fadeOut").addClass("fadeIn"),s.removeClass("moveMain")}),$(window).scroll(function(){d.css("top",Math.max(80,260-$(this).scrollTop()))})});</script><script type="text/javascript">$(document).ready(function(){var t=$(".share"),a=t.attr("data-url"),e=encodeURIComponent(a),r=t.attr("data-title"),c=t.attr("data-tsina"),o=['<a href="#" class="overlay" id="qrcode"></a>','<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url='+e+'"/></div>','<a href="#textlogo" class="article-back-to-top" title="Top"></a>','<a href="https://www.facebook.com/sharer.php?u='+e+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>','<a href="https://twitter.com/intent/tweet?url='+e+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="http://service.weibo.com/share/share.php?title='+r+"&url="+e+"&ralateUid="+c+'&searchPic=true&style=number" class="article-share-weibo" target="_blank" title="Weibo"></a>','<span title="Share to"></span>'].join("");t.append(o),$(".article-share-qrcode").click(function(){var t=$("#qrcode-pic").attr("data-src");$("#qrcode-pic").attr("src",t),$("#qrcode-pic").load(function(){$(".qrcode strong").text(" ")})})});</script><script type="text/javascript">var duoshuoQuery={short_name:"binsee"};!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//static.duoshuo.com/embed.js",e.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script><div class="bottom-btn"><a class="icon-gotop" href="javascript:void(0)" title="返回顶部"></a><script src="/wechat-php-sdk/js/gotop.js" type="text/javascript"></script></div><script src="/wechat-php-sdk/js/toc_aside_toggle.js" type="text/javascript"></script></body></html>