<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="baidu_union_verify" content="d1952c66cf48912e21c18c7c581f382a"><meta name="360-site-verification" content="67fbcc5a67f4c65c057315b28fa0b2c8"><meta name="google-site-verification" content="2GzxQ0VtXwTSUdmGm6DzcmhTzM_I9QmzCb_pzpMzD88"><title>关于微信公众平台调整SSL安全策略的测试 | wechat-php-sdk Blog</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3,minimum-scale=1"><meta name="author" content="binsee"><meta name="description" itemprop="description" content="公众平台调整SSL安全策略后，PHP访问方式的验证"><link rel="alternate" href="atom.xml" title="wechat-php-sdk Blog" type="application/atom+xml"><link rel="icon" href="/wechat-php-sdk/img/favicon.ico"><link rel="apple-touch-icon" href="/wechat-php-sdk/img/pacman.jpg"><link rel="apple-touch-icon-precomposed" href="/wechat-php-sdk/img/pacman.jpg"><link rel="stylesheet" href="/wechat-php-sdk/css/style.css" type="text/css"></head><body><header><div><div id="textlogo"><h1 class="site-name"><a href="/wechat-php-sdk/" title="wechat-php-sdk Blog">wechat-php-sdk Blog</a></h1><h2 class="blog-motto">微信平台wechat-php-sdk开源项目，开发文档blog</h2></div><div class="navbar"><a class="navbutton navmobile" href="#" title="菜单"></a></div><nav class="animated"><ul><ul><li><a href="/wechat-php-sdk/">首页</a></li><li><a href="/wechat-php-sdk/archives">归档</a></li><li><a href="/wechat-php-sdk/update">更新日志</a></li><li><a href="/wechat-php-sdk/readme">项目文档</a></li><li><a href="/wechat-php-sdk/about">关于项目</a></li><li><form class="search" action="//google.com/search" method="get" accept-charset="utf-8"><label>Search</label><input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索"> <input type="hidden" name="q" value="site:binsee.github.io/wechat-php-sdk"></form></li></ul></ul></nav></div></header><div id="container"><div id="main" class="post" itemscope itemprop="blogPost"><article itemprop="articleBody"><header class="article-info clearfix"><h1 itemprop="name"><a href="/wechat-php-sdk/2014/201411032325/" title="关于微信公众平台调整SSL安全策略的测试" itemprop="url">关于微信公众平台调整SSL安全策略的测试</a></h1><p class="article-author">By <a href="https://binsee.github.io/wechat-php-sdk" title="binsee">binsee</a></p><p class="article-time"><time datetime="2014-11-03T15:25:59.000Z" itemprop="datePublished">2014年11月03日</time> 更新日期:<time datetime="2014-12-29T19:37:03.000Z" itemprop="dateModified">2014年12月30日</time></p></header><div class="article-content"><div id="toc" class="toc-article"><h2 class="toc-title"><span>文章目录</span></h2><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#引文：微信平台官方的公告"><span class="toc-number">1.</span> <span class="toc-text">引文：微信平台官方的公告</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#缘起"><span class="toc-number">2.</span> <span class="toc-text">缘起</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试结果："><span class="toc-number">3.</span> <span class="toc-text">测试结果：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查阅的文件"><span class="toc-number">4.</span> <span class="toc-text">查阅的文件</span></a></li></ol></div><h2 id="引文：微信平台官方的公告">引文：微信平台官方的公告</h2><blockquote><div class="inner"><strong><a href="https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&amp;key=1414562353&amp;version=6&amp;lang=zh_CN" target="_blank" rel="external">公众平台调整SSL安全策略，请开发者注意升级</a></strong><div id="content"><p><span style="font-family:微软雅黑, Microsoft YaHeifont-size:14pxfont-family:微软雅黑, Microsoft YaHei;font-size:14px">近一段时间HTTPS加密协议SSL曝出高危漏洞，可能导致网络中传输的数据被黑客监听，对用户信息、网络账号密码等安全构成威胁。为保证用户信息以及通信安全，微信公众平台将关闭掉SSLv2、SSLv3版本支持，不再支持部分使用SSLv2、 SSLv3或更低版本的客户端调用。<span style="color: rgb(0, 0, 0)"><strong>请仍在使用这些版本的开发者于11月30日前尽快修复升级。</strong></span></span></p><div><span style="font-family:微软雅黑, Microsoft YaHeifont-size:14pxfont-family:微软雅黑, Microsoft YaHei;font-size:14px">注意：通过微信开放平台（open.weixin.qq.com）进行移动应用和网页应用开发的开发者也同样需要修复升级。<br>建议开发者使用如下方法进行修复：<br>OpenSSL（<a href="http://www.openssl.org）可使用SSL_CTX" target="_blank" rel="external">http://www.openssl.org）可使用SSL_CTX</a> <em>SSL_CTX_new(const SSL_METHOD</em>method)函数设置SSL客户端请求方法，使用TLSv1_client_method或更高版本。<br><br>示例1（php）:<br>curl_setopt($curl, CURLOPT_SSLVERSION, CURL_SSLVERSION_TLSv1);<br><br>示例2（C#）:<br>System.Net.ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls | SecurityProtocolType.Tls11 | SecurityProtocolType.Tls12</span><iframe id="tmp_downloadhelper_iframe" style="display: none"></iframe></div></div><p class="sign">微信团队<br><span id="online_time">2014年10月29日</span></p></div></blockquote><hr><h2 id="缘起">缘起</h2><p>就这个安全策略的更改，让一堆人都比较茫然。<br>在<strong><a href="https://github.com/dodgepudding/wechat-php-sdk" target="_blank" rel="external">wechat-php-sdk</a></strong>类库的部分使用者和开发者们，也进行了讨论：<br>部分链接：<strong><a href="https://github.com/dodgepudding/wechat-php-sdk/pull/149" target="_blank" rel="external">pull#149</a> 、 <a href="https://github.com/dodgepudding/wechat-php-sdk/pull/145" target="_blank" rel="external">pull#145</a> 、 <a href="https://github.com/dodgepudding/wechat-php-sdk/issues/150" target="_blank" rel="external">issues#150</a></strong></p><p>虽然查阅很多文件，最终认为应该为CURLOPT_SSLVERSION参数使用数值1，但毕竟微信官方的接口到11月30日后才会进行更改，才能得出结论。而查阅到的文件中都没有明确说TLS方式的值是1，心里总有些没底。因此今天查了查资料，自己做个模拟试验，来证明是否可用。</p><p>我的本地服务器端软件是phpStudy 2014版，集成的组件很多，我主要用Apache，而php有5.2-5.6共计5个版本。</p><p>思路：<br>1、使用Apache搭建https服务器<br>2、限制https服务器不允许使用SSLv2、SSLv3。也就是说只能用TLS方式了<br>这里就不说配置https的过程了，相关教程一堆。这里把最关键的关闭SSLv2、v3的内容说一下：<br>Apache的：<br>在httpd-ssl.conf文件中替换这两个设置：</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="constant">SSLProtocol</span> all -<span class="constant">SSLv3</span> -<span class="constant">SSLv2</span> </div><div class="line"><span class="constant">SSLCipherSuite</span>  <span class="constant">ECDHE</span>-<span class="constant">RSA</span>-<span class="constant">AES128</span>-<span class="constant">GCM</span>-<span class="constant">SHA256</span><span class="symbol">:ECDHE-RSA-AES128-SHA</span><span class="symbol">:ECDHE-RSA-RC4-SHA</span><span class="symbol">:AES128-GCM-SHA256</span><span class="symbol">:AES128-SHA256</span><span class="symbol">:AES128-SHA</span><span class="symbol">:ECDHE-RSA-AES256-GCM-SHA384</span><span class="symbol">:ECDHE-RSA-AES256-SHA384</span><span class="symbol">:ECDHE-RSA-AES256-SHA</span><span class="symbol">:AES256-GCM-SHA384</span><span class="symbol">:AES256-SHA256</span><span class="symbol">:AES256-SHA</span><span class="symbol">:ECDHE-RSA-AES128-SHA256</span><span class="symbol">:RC4-SHA</span><span class="symbol">:</span>!<span class="symbol">aNULL:</span>!<span class="symbol">eNULL:</span>!<span class="constant">EXPORT</span><span class="symbol">:</span>!<span class="constant">DES</span><span class="symbol">:</span>!<span class="number">3</span><span class="constant">DES:</span>!<span class="constant">MD5</span><span class="symbol">:</span>!<span class="constant">DSS</span><span class="symbol">:</span>!<span class="constant">PKS</span></div></pre></td></tr></table></figure><p>这样就无法使用SSLv2、v3的方式连接https了，只能用TLS。<br>其他环境的请看文章最后的参考<a href="#查阅的文件">文章链接部分</a>。</p><p>使用的测试代码：<br>我将https的443端口指向的目录里有个1.php文件，内容很简单：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">&lt;?php</span></div><div class="line"><span class="keyword">echo</span> <span class="string">"yes!"</span>;</div><div class="line"><span class="preprocessor">?&gt;</span></div></pre></td></tr></table></figure><p>然后是普通的http访问的页面<a href="http://127.0.0.1/99.php，代码如下：" target="_blank" rel="external">http://127.0.0.1/99.php，代码如下：</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">&lt;?php</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">http_get</span><span class="params">(<span class="variable">$url</span>)</span></span>{</div><div class="line">    <span class="variable">$oCurl</span> = curl_init();</div><div class="line">    <span class="keyword">if</span>(stripos(<span class="variable">$url</span>,<span class="string">"https://"</span>)!==<span class="keyword">FALSE</span>){</div><div class="line">        curl_setopt(<span class="variable">$oCurl</span>, CURLOPT_SSL_VERIFYPEER, <span class="keyword">FALSE</span>);</div><div class="line">        curl_setopt(<span class="variable">$oCurl</span>, CURLOPT_SSL_VERIFYHOST, <span class="keyword">FALSE</span>);</div><div class="line">        curl_setopt(<span class="variable">$oCurl</span>, CURLOPT_SSLVERSION,<span class="number">1</span>); <span class="comment">//CURL_SSLVERSION_TLSv1</span></div><div class="line">    }</div><div class="line">    curl_setopt(<span class="variable">$oCurl</span>, CURLOPT_URL, <span class="variable">$url</span>);</div><div class="line">    curl_setopt(<span class="variable">$oCurl</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span> );</div><div class="line">    <span class="variable">$sContent</span> = curl_exec(<span class="variable">$oCurl</span>);</div><div class="line">    <span class="variable">$aStatus</span> = curl_getinfo(<span class="variable">$oCurl</span>);</div><div class="line">    curl_close(<span class="variable">$oCurl</span>);</div><div class="line">    <span class="keyword">if</span>(intval(<span class="variable">$aStatus</span>[<span class="string">"http_code"</span>])==<span class="number">200</span>){</div><div class="line">        <span class="keyword">return</span> <span class="variable">$sContent</span>;</div><div class="line">    }<span class="keyword">else</span>{</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"><span class="variable">$r</span>=http_get(<span class="string">"https://127.0.0.1/1.php"</span>);</div><div class="line">var_dump(<span class="variable">$r</span>);</div><div class="line"><span class="keyword">exit</span>;</div><div class="line"><span class="preprocessor">?&gt;</span></div></pre></td></tr></table></figure><p>访问http页面：<a href="http://127.0.0.1/99.php" target="_blank" rel="external">http://127.0.0.1/99.php</a><br>显示的结果是：</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">string</span>(<span class="number">4</span>) <span class="string">"yes!"</span></div></pre></td></tr></table></figure><p>测试其他访问方式，修改99.php中 第7行的数值，进行测试。</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="title">CURLOPT_SSLVERSION</span> 参数可选值的定义如下：</div><div class="line">CURL_SSLVERSION_DEFAULT (<span class="number">0</span>)</div><div class="line">CURL_SSLVERSION_TLSv1 (<span class="number">1</span>)</div><div class="line">CURL_SSLVERSION_SSLv2 (<span class="number">2</span>)</div><div class="line">CURL_SSLVERSION_SSLv3 (<span class="number">3</span>)</div><div class="line">CURL_SSLVERSION_TLSv1_0 (<span class="number">4</span>)</div><div class="line">CURL_SSLVERSION_TLSv1_1 (<span class="number">5</span>)</div><div class="line">CURL_SSLVERSION_TLSv1_2 (<span class="number">6</span>)</div><div class="line">其中，后三种方式，在curl <span class="number">7</span>.<span class="number">34</span>版以后才支持。</div></pre></td></tr></table></figure><p>你可以发现，只要数值为2或3，都无法访问。而是用其他数值，根据php版本和curl版本不同，是否可以访问的结果也不同。</p><hr><h2 id="测试结果：">测试结果：</h2><p>经过测试（本地搭建https服务器，限制只能用tls验证），HTTPS修改为tls验证方式后，通过设置参数<br>curl_setopt($oCurl, CURLOPT_SSLVERSION, 1);<br>可以访问（不加也可以，会自动尝试TLS/SSL方式，但最好是加上）。</p><p>测试结果如下：<br>php版本5.2、5.3，curl版本为：7.21.0 只能用值1，即TLSv1<br>php版本5.4、5.5，curl版本：7.36.0 OpenSSL版本：0.9.8y/1.0.1f 可用值1或4，即TLSv1/v1.0<br>php版本5.6，curl版本：7.36.0 OpenSSL版本：1.0.1g 可用值1或4，即TLSv1/v1.0</p><p>或许是我服务器https配置问题，只能使用TLSv1.0访问，使用TLS的V1.1、V1.2版本会访问失败（即常量5、6）。</p><p>由此测试得出结论，国内无论用哪家的php空间，php版本至少达到5.2，curl版本为7.21及以上，使用常量值1即可（再低的我这没版本可以测试）。</p><hr><h2 id="查阅的文件">查阅的文件</h2><p>CURLOPT_SSLVERSION选项参考：<a href="http://php.net/manual/en/function.curl-setopt.php" target="_blank" rel="external">http://php.net/manual/en/function.curl-setopt.php</a><br>apache下配置https的文档：<a href="http://flyli815.iteye.com/blog/1837204" target="_blank" rel="external">http://flyli815.iteye.com/blog/1837204</a><br><a href="http://csq-3.blog.163.com/blog/static/38738439200911741031190/" target="_blank" rel="external">http://csq-3.blog.163.com/blog/static/38738439200911741031190/</a><br>关闭apache下https的SSLv2、SSLv3访问设置：<a href="http://www.myhack58.com/Article/html/3/62/2014/54804_5.htm" target="_blank" rel="external">http://www.myhack58.com/Article/html/3/62/2014/54804_5.htm</a><br>其他：<a href="https://wiki.mozilla.org/Security/Server_Side_TLS" target="_blank" rel="external">https://wiki.mozilla.org/Security/Server_Side_TLS</a></p></div><footer class="article-footer clearfix"><div class="article-categories"><span></span> <a class="article-category-link" href="/wechat-php-sdk/categories/公众平台/">公众平台</a></div><div class="article-share" id="share"><div data-url="https://binsee.github.io/wechat-php-sdk/2014/201411032325/" data-title="关于微信公众平台调整SSL安全策略的测试 | wechat-php-sdk Blog" data-tsina="null" class="share clearfix"></div></div></footer></article><nav class="article-nav clearfix"><div class="prev"><a href="/wechat-php-sdk/2014/201412300239/" title="博客主题修改及功能改动"><strong>上一篇:</strong><br><span>博客主题修改及功能改动</span></a></div><div class="next"><a href="/wechat-php-sdk/2014/2014101601/" title="公众平台加密方案,订阅号无法回复问题解决方案"><strong>下一篇:</strong><br><span>公众平台加密方案,订阅号无法回复问题解决方案</span></a></div></nav><section class="comment"><div class="ds-thread" data-thread-key="/wechat-php-sdk/2014/201411032325/" data-title="关于微信公众平台调整SSL安全策略的测试" data-url="https://binsee.github.io/wechat-php-sdk/2014/201411032325/" id="ds_thread"><noscript>Please enable JavaScript to view the <a href="//duoshuo.com/?ref_noscript">comments powered by duoshuo.</a></noscript></div></section></div><div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div><div id="toc" class="toc-aside"><strong class="toc-title">文章目录</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#引文：微信平台官方的公告"><span class="toc-number">1.</span> <span class="toc-text">引文：微信平台官方的公告</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#缘起"><span class="toc-number">2.</span> <span class="toc-text">缘起</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试结果："><span class="toc-number">3.</span> <span class="toc-text">测试结果：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查阅的文件"><span class="toc-number">4.</span> <span class="toc-text">查阅的文件</span></a></li></ol></div><div id="asidepart"><aside class="clearfix"><div id="authorInfo"><div class="author-logo"></div><div class="author-info"><p>Hi,欢迎来到这里.<br>有问题可以在项目文章下方留言交流.<br></p></div><div class="social-list" class="clearfix"><a href="https://github.com/binsee/wechat-php-sdk" target="_blank" title="github"></a></div></div><div class="categorieslist"><p class="asidetitle">分类</p><ul><li><a href="/wechat-php-sdk/categories/wechat-php-sdk/" title="wechat-php-sdk">wechat-php-sdk<sup>1</sup></a></li><li><a href="/wechat-php-sdk/categories/公众平台/" title="公众平台">公众平台<sup>7</sup></a></li><li><a href="/wechat-php-sdk/categories/分类/" title="分类">分类<sup>1</sup></a></li><li><a href="/wechat-php-sdk/categories/博客/" title="博客">博客<sup>2</sup></a></li></ul></div><div class="tagslist"><p class="asidetitle">标签<ul class="clearfix"><li><a href="/wechat-php-sdk/tags/Hexo/" title="Hexo">Hexo<sup>1</sup></a></li><li><a href="/wechat-php-sdk/tags/JSSDK/" title="JSSDK">JSSDK<sup>1</sup></a></li><li><a href="/wechat-php-sdk/tags/demo/" title="demo">demo<sup>1</sup></a></li><li><a href="/wechat-php-sdk/tags/jsapi/" title="jsapi">jsapi<sup>2</sup></a></li><li><a href="/wechat-php-sdk/tags/jssdk/" title="jssdk">jssdk<sup>1</sup></a></li><li><a href="/wechat-php-sdk/tags/wiki/" title="wiki">wiki<sup>1</sup></a></li><li><a href="/wechat-php-sdk/tags/分享/" title="分享">分享<sup>1</sup></a></li><li><a href="/wechat-php-sdk/tags/标签/" title="标签">标签<sup>1</sup></a></li></ul></p></div><div class="recentcomments"><h3 class="recentcomments-title">近期评论</h3><ul class="widget ds-recent-comments" data-num-items="5" data-show-avatars="1" data-show-title="1" data-show-time="1" data-show-admin="1" data-excerpt-length="70"></ul></div><div class="linkslist"><p class="asidetitle">友情链接</p><ul><li><a href="https://github.com/dodgepudding/wechat-php-sdk" target="_BLANK" title="wechat-php-sdk on Github for dodgepudding">dodgepudding&#39;s Github</a></li><li><a href="https://github.com/binsee/wechat-php-sdk" target="_BLANK" title="wechat-php-sdk on Github for binsee">binsee&#39;s Github</a></li></ul></div><div class="rsspart"><a href="atom.xml" target="_blank" title="rss">RSS 订阅</a></div></aside></div></div><footer><div id="footer"><p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> & <a href="http://gengbiao.me" target="_blank" title="coney">coney</a> © 2015 <a href="https://binsee.github.io/wechat-php-sdk" target="_blank" title="binsee">binsee</a></p></div></footer><script src="/wechat-php-sdk/js/jquery-2.1.0.min.js"></script><script type="text/javascript">$(document).ready(function(){function e(){"number"==typeof window.innerWidth?n=window.innerWidth:document.documentElement&&document.documentElement.clientWidth&&(n=document.documentElement.clientWidth)}$(".navbar").click(function(){$("header nav").toggleClass("shownav")});var n=0,s=$("#main"),a=$("#asidepart"),o=$(".closeaside"),d=$(".openaside");$(window).resize(function(){e(),n>=1024?$("header nav").removeClass("shownav"):(s.removeClass("moveMain"),a.css("display","block").removeClass("fadeOut"),d.css("display","none"),$("#toc.toc-aside").css("display","none"))}),o.click(function(){a.addClass("fadeOut").css("display","none"),d.css("display","block").addClass("fadeIn"),s.addClass("moveMain")}),d.click(function(){d.css("display","none").removeClass("beforeFadeIn"),a.css("display","block").removeClass("fadeOut").addClass("fadeIn"),s.removeClass("moveMain")}),$(window).scroll(function(){d.css("top",Math.max(80,260-$(this).scrollTop()))})});</script><script type="text/javascript">$(document).ready(function(){{var a=$(".article-content>iframe"),t=$(".article-content>embed"),n=$("#toc");$("article h2")}ah=$("article h2"),ta=$("#toc.toc-aside"),o=$(".openaside"),c=$(".closeaside"),a.length>0&&a.wrap('<div class="video-container" />'),t.length>0&&t.wrap('<div class="video-container" />'),0==ah.length?n.css("display","none"):(c.click(function(){ta.css("display","block").addClass("fadeIn")}),o.click(function(){ta.css("display","none")}),$(window).scroll(function(){ta.css("top",Math.max(140,320-$(this).scrollTop()))}))});</script><script type="text/javascript">$(document).ready(function(){var t=$(".share"),a=t.attr("data-url"),e=encodeURIComponent(a),r=t.attr("data-title"),c=t.attr("data-tsina"),o=['<a href="#" class="overlay" id="qrcode"></a>','<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url='+e+'"/></div>','<a href="#textlogo" class="article-back-to-top" title="Top"></a>','<a href="https://www.facebook.com/sharer.php?u='+e+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>','<a href="https://twitter.com/intent/tweet?url='+e+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="http://service.weibo.com/share/share.php?title='+r+"&url="+e+"&ralateUid="+c+'&searchPic=true&style=number" class="article-share-weibo" target="_blank" title="Weibo"></a>','<span title="Share to"></span>'].join("");t.append(o),$(".article-share-qrcode").click(function(){var t=$("#qrcode-pic").attr("data-src");$("#qrcode-pic").attr("src",t),$("#qrcode-pic").load(function(){$(".qrcode strong").text(" ")})})});</script><script type="text/javascript">var duoshuoQuery={short_name:"binsee"};!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//static.duoshuo.com/embed.js",e.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script><div class="bottom-btn"><a class="icon-gotop" href="javascript:void(0)" title="返回顶部"></a><script src="/wechat-php-sdk/js/gotop.js" type="text/javascript"></script><a class="icon-toc-toggle" href="javascript:void(0)" title="文章目录"></a></div><script src="/wechat-php-sdk/js/toc_aside_toggle.js" type="text/javascript"></script></body></html>